<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>


<body>

    <!-- Promises and  fetch -->



    <!-- ******** Fetch() API  -->
    <!-- Provided by the Browser -->
    <!-- The Fetch API provides a JS interface for accesssing and manipulating partsof Protocol  
    such as request and  Responses
    Helps to fetch resources async across the  Network  
    -->



    <script>

    

    // *******
    //  JS Callbacks ==> 
        // A Callback  function is a function which is passed into another function as an argument and then invoked 
        // inside the function to complete some kind of action 


        // Basic Callback Function => 
        // One of the basic Callback Function is => 
         
                // setTimeout(() =>
                // {
                //     console.log("Hello ")
                // },200)

        // In this we are telling js to call our callback Function after Waitig for 200ms or 2s .
        // The setTimeout function takes two paramters :->  a callback fn and a timeout number in milliseconds


        //  Let's me EXPLAIN you with an more  example => 

        // Normal way of Doing Doing Looping 
                //  const names = ['james','range','delhi','red'];

                //  names.forEach((names) => {console.log(names)})


         // Let's Do with the Callback

            // const names = ['james','range','delhi','redwrferwf'];

            // const myforeach = (arr,cb) =>
            // {
            //     for (let i = 0; i < arr.length; i++) {
            //         const element = arr[i];
            //         cb(element);
            //     }
            // }      

            // myforeach(names,(name) =>
            // {
            //     console.log(name);
            // })


                // Promise =>> 

                // ==> Here Promise will take functions  two parameters (resolve , reject ) 

                // and Logic is applied  


                // after on this variable   applied .then  
                // and write message  for success and failure  case 


                    // let p  = new Promise((resolve,reject) =>
                    // {
                    //     let a = 1 + 1;
                    //     if(a == 2) { resolve('success')}
                    //     else {reject('error')}
                    // })
    
                    //     console.log(p)
                        


                    // p.then((message) =>
                    // {
                    //         console.log('This is  in then' + message)
                    // })
                    // .catch((message) =>
                    // {
                    //     console.log('This is in catch' + message)
                    // })


                // Promises  are really useful when things   taking a long  loading time 
                //  and we want to perform some function after it 

                // For Eg Like an Image if we are downloading from server if it takes long time 
                // then we can show when it gets downloaded , if fails then show Error 



                    // function  getmeaPromise()
                    // {
                    //     return fetch('/data.json')
                    // }

                    // console.log(getmeaPromise());


                //     getmeaPromise().then(result =>
                //    {
                //         console.log(result)
                //    })


                    // Simple way of getting data or Representing a Promise  => 
                    // fetch will also return a Promise in Output 

                    // For Json data => 

                     // ==>  const user = fetch('/data.json');

                    const API = "https://jsonplaceholder.typicodeom/posts/2";
                    const user = fetch(API)

                    console.log(user);

                    user.then(function(data)
                    {
                        console.log(data);
                    })
                    .catch(err=>
                    {
                        console.log('Wrong data',err)
                    })



                    // Console will show us allthe data 


    </script>
<!-- 
     <h2> Inside dd wrvqew ervds   </h2> -->
</body>
</html>


<!-- Promise -->

        <!-- Promises is kind of Object which tells us or promise us to return the output in future  -->

        <!-- function  getmePromise()
          {
                // ....
                // ....
                return <something> // this is promise 
          } -->

    <!--  getmePromise()  -->

           <!-- In above function like getmeaPromise 
             we write the piece of Code and the at the last we
             want to  return something which is let's suppose  promise
             
             so this something in line 112  shows us that it will return us
             output surely or  after  some time 
             
           -->

           <!--   To Better Deal with  this Syntax 
                we used  .then() to deal 
               -->


   <!--   So *****  -->  

    <!-- Example is like =>  -->
                <!-- function getmePromise()
                    {
                         return fetch('/data.json')
                    } -->


        <!--  Above Example be Like  fetch the data from json file     
          which surely return us the Promise -->

           <!--   console.log(getmePromise())  -->
           <!-- After Consoling the Value we get to know about the Situation of Promise   -->


       
     <!-- Both Resolve and Reject are handled in Promise   -->    

      <!-- Promise can be more or less in  three states  ->
          'pending'  ||  'Resolved'  ||  'Reject'  -->


          <!--  After Consoling the  value we get to know that it returns us a state 
                To  get the desired output  we go deeper one Level 


                .then method returns  a promise which allows for Method Chaining 
           -->
 
                      <!-- function  getmeaPromise()
                    {
                        return fetch('/data.json')
                    }

                    getmeaPromise().then(result =>
                   {
                        console.log(result)
                   }) -->


   <!--  ******* -->
   <!-- .catch in js  -->

    <!-- After then when promise moved from pending to some other state 
         or if there is any error , to handle it Properly we used catch 
         

         
    -->

            <!-- promise.then((data) =>
            {
                console.log('Get Something',data)
            }).catch((error) =>
            {
                console.log('Promise failed' ,error)
            })

                            -->





                            // <!--  ***********  -->
                            <!-- This code  will be Executed in Script tag only  -->
                            //    <!-- Async &  Await  -->
              
                          <!-- //   Here How Normal  Function works Execution 
              
                      // function promiset()
                      // {
                      //     return new Promise(resolve =>
                      //     {     setTimeout(() =>
                      //         {
                      //             resolve();
                      //         },1000)
                      //     })
                      // } -->
              
                      <!-- // promiset().then(() =>
                      // {
                      //     console.log('statement 111 ')
                      //     return promiset();
                      // }).then(() =>
                      // {
                      //     console.log('statement 222 ')
                      //     return promiset();
                      // }).then(() =>
                      // {
                      //     console.log('statement 3333 ')
                      //     return promiset();
                      // })
               -->
              
              
                      <!-- // Output is ->  statement 111 
                                    //  statement 222
                                   //  statement 333 
                                    -->
                                   
              
                          <!-- // *********
              
                           function promiset()
                      {
                          return new Promise(resolve =>
                          {     setTimeout(() =>
                              {
                                  resolve();
                              },1000)
                          })
                      }
               -->
              
                      <!-- // async function boot()
                      // {
                      //         promiset();
                      //         console.log(" Placed Finally 1 ")
                      // } -->
              
                          <!-- // If  we directly write this it is not gurranted that promiset() has been executed properly first and then  console will get  executed
              
                          // *****
                          // or in other words we can say that if fetch is placed at Line 149 ,     
                          //  before console then it is not sure data will be fetched first and then  valueis consoled 
              
              
                          // So need something which can help or wait until thisfunction return us back something 
              
              
                          // So write await  -->
              
<!--               
                             async function boot()
                          {
                              await promiset();
                              console.log(" Placed Finally 111 ")
              
                              await promiset();
                              console.log(" Placed Finally 222 ")
              
                              await promiset();
                              console.log(" Placed Finally 333 ")
                          }
              
                       boot();
               -->
              
                      <!-- //  sow await helps us to wait sometime and then gives us output 
                      //   ==>       So with Async-Await we are able to 
                      // Write Code Efficiently , Cleaner Way 
              
              
                      // Remember await is for Promise not for  the function  -->



 
                      <!-- How to Handle Error  -->

         <!-- To Properly Handle Error in async Use Try-Catch Block  -->

            <!-- async function first()
            {
                try()
                {
                    const req1 = await fetch('/data.json')
                    console.log('Yup it works ')
                }catch(error)
                {
                    console.log('Something Went Wrong',error)
                }
            } -->

            <!-- first() -->