<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>



<body>
    <h2> Insiefvsdcde Camus   </h2>


   <script> 

        // ******
        // Promise.all ==> 
        // 1) ==> This is the Normal way 
        

        // async function promisefun()
        // {
        //     const req1 = await   fetch('/data1.json') 
        //     const req2 = await   fetch('/data2.json') 
        //     const req3 = await   fetch('/data3.json') 

        //     console.log(req1,req2,req3);
        // }

        //  promisefun();

        // Output is ->  It will return us three Promises 


        // 2) => Now Convert it into Json format and get the output 

                //  async function promisefun()
                // {
                //      const req1 = await   fetch('/data1.json') 
                //      const resp1 = await req1.json();

                //     const req2 = await   fetch('/data2.json') 
                //     const resp2  = await req2.json();

                //     const req3 = await   fetch('/data3.json') 
                //     const resp3  = await req3.json();

                //     console.log(resp1,resp2,resp3);
                // }

                //  promisefun();


        // ==> Object format is Shown 
    //  ==>  when we get the data it is independent of each other which consume more time
    //      =>   But Browser has More Capability to do it Simulataneously 
    // To  Perform this funcitonality we will use Promise.all()


    // => Benefit of Using Promise.all   is that this will return a promise which will  only resovled when 
    // => all the  promises inside  this get resolved  properly 
    //    otherwise  with await only we get  only promise with pending state which is not  efficient 4


    // Definiton of Promsise.all -> 

    //  It is an method which  takes promises an input , and returns a Single Promise
    //  in the form of an array 


    // ***) ==> Promise.all() -> Let Suppose if we want to POst Something  on 3  Social Media platforms 
    // At once like fb ,insta, snapchat 
    
    // then we can use somthing like Promise.all()   => It will help to Post Data without Depending in each other   
    
    // ==>  Promise.all() “takes an iterable of promises as an input, and returns a single Promise that resolves to an array of the results of the input promises.”



        // 3) => Now use 

            //              async function promisefun()
            //     {
            //          const req1 =  fetch('/data1.json') 

            //          const req2 =  fetch('/data2.json') 

            //          const req3 =  fetch('/data3.json') 

            //             const promise = Promise.all([req1,req2,req3])
            //              console.log( await promise);
            //     }

            //  promisefun();

            //  Now if we do it with the help of Promise.all which takes responses in arrays
            // and take it in Sequence or like in array [0] [1] [2]...
            // give us Output 

            // Promise.all returns a single Promise that resolves all  when all promises passed . 


            // *****

                    async function promisefun()
                {
                     const req1 =  fetch('/data1.json') 
                     const req2 =  fetch('/data2.json') 
                     const req3 =  fetch('/data3.json') 

                    const promise = Promise.all([req1,req2,req3])    
                    console.log(promise);    
                    // const responses = await promise

                    // const jsondata = await Promise.all(responses.map(t => t.json()))
                    // console.log(jsondata);
                }

               promisefun(); 
  

            //    If Single Promise fails  then  all fails


            // *******
            // Promise.allSettled 

            // One of themain reason to use Promise.allSettled is that  promise.all  
            //  fails the all request when even a single request fails 

            // Which is some times good but sometimes bad
            // So Handle this type of data we  will used Promise.allSettled


            // Promise.allSettled is used to return  a promise  that fulfills   after all the given promises
            // have either fulfilled or rejected  , and also give us the outcome of  promise or can say tell the 
            // reason 


            // async function promisefun()
            //     {
            //          const req1 =  fetch('/data1.json') 
            //          const req2 =  fetch('https://vergrttebfdv//evd ') 
            //          const req3 =  fetch('/data3.json') 

            //             const promise = Promise.allSettled([req1,req2,req3])
 
            //             const responses = await promise
            //             console.log(responses);
            //     }

            //    promisefun();

            //    With this statement now we get the status and the value of each Promise 
            // So  *)  Now Every Promise will give us Diff output independent of each other
                // **)  


   </script> 
</body>
</html>